{"ast":null,"code":"import AsyncStorage from \"@react-native-async-storage/async-storage\";\nexport function createUserStore() {\n  const setToken = async (user, token) => {\n    try {\n      await AsyncStorage.setItem(\"@token\", token);\n      await AsyncStorage.setItem(\"@user\", user.username);\n    } catch (e) {// saving error\n    }\n  };\n\n  const getToken = async () => {\n    try {\n      const value = await AsyncStorage.getItem(\"@token\");\n\n      if (value !== null) {\n        return value;\n      }\n    } catch (e) {}\n  };\n\n  const removeToken = async () => {\n    try {\n      await AsyncStorage.removeItem(\"@token\");\n      await AsyncStorage.removeItem(\"@user\");\n    } catch (e) {// remove error\n    }\n  };\n\n  return {\n    state: {\n      isLoading: false,\n      isAuthenticated: false,\n      user: null,\n      token: getToken()\n    },\n\n    setState(state) {\n      this.state = state;\n    },\n\n    logoutState: {\n      isLoading: false,\n      isAuthenticated: false,\n      user: null,\n      token: null\n    },\n\n    setLogoutState() {\n      removeToken();\n      let logoutState = {\n        isLoading: false,\n        isAuthenticated: false,\n        user: null,\n        token: null\n      };\n      this.state = logoutState;\n    },\n\n    loginFail: {\n      isAuthenticated: false,\n      user: null,\n      token: null\n    },\n    loginSuccess: {\n      isLoading: false,\n      isAuthenticated: false,\n      user: null,\n      token: localStorage.getItem(\"token\")\n    },\n\n    setLoginState(user, token) {\n      setToken(user, token);\n      let loginState = {\n        isLoading: false,\n        isAuthenticated: true,\n        user: user.username,\n        token: token\n      };\n      this.state = loginState;\n    },\n\n    setRememberState(user, token) {\n      let loginState = {\n        isLoading: false,\n        isAuthenticated: true,\n        user: user,\n        token: token\n      };\n    }\n\n  };\n}","map":{"version":3,"sources":["D:/Github/ShowApp/frontend/src/util/store/userstore.tsx"],"names":["AsyncStorage","createUserStore","setToken","user","token","setItem","username","e","getToken","value","getItem","removeToken","removeItem","state","isLoading","isAuthenticated","setState","logoutState","setLogoutState","loginFail","loginSuccess","localStorage","setLoginState","loginState","setRememberState"],"mappings":"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","sourcesContent":["import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\nexport function createUserStore() {\r\n  const setToken = async (user, token) => {\r\n    try {\r\n      await AsyncStorage.setItem(\"@token\", token);\r\n      await AsyncStorage.setItem(\"@user\", user.username);\r\n    } catch (e) {\r\n      // saving error\r\n    }\r\n  };\r\n\r\n  const getToken = async () => {\r\n    try {\r\n      const value = await AsyncStorage.getItem(\"@token\");\r\n      if (value !== null) {\r\n        return value;\r\n      }\r\n    } catch (e) {}\r\n  };\r\n\r\n  const removeToken = async () => {\r\n    try {\r\n      await AsyncStorage.removeItem(\"@token\");\r\n      await AsyncStorage.removeItem(\"@user\");\r\n    } catch (e) {\r\n      // remove error\r\n    }\r\n  };\r\n\r\n  return {\r\n    state: {\r\n      isLoading: false,\r\n      isAuthenticated: false,\r\n      user: null,\r\n      token: getToken(),\r\n    },\r\n\r\n    setState(state: Object) {\r\n      this.state = state;\r\n    },\r\n\r\n    logoutState: {\r\n      isLoading: false,\r\n      isAuthenticated: false,\r\n      user: null,\r\n      token: null,\r\n    },\r\n\r\n    setLogoutState() {\r\n      removeToken();\r\n      let logoutState = {\r\n        isLoading: false,\r\n        isAuthenticated: false,\r\n        user: null,\r\n        token: null,\r\n      };\r\n      this.state = logoutState;\r\n    },\r\n\r\n    loginFail: {\r\n      isAuthenticated: false,\r\n      user: null,\r\n      token: null,\r\n    },\r\n\r\n    loginSuccess: {\r\n      isLoading: false,\r\n      isAuthenticated: false,\r\n      user: null,\r\n      token: localStorage.getItem(\"token\"),\r\n    },\r\n\r\n    setLoginState(user, token) {\r\n      setToken(user, token);\r\n\r\n      let loginState = {\r\n        isLoading: false,\r\n        isAuthenticated: true,\r\n        user: user.username,\r\n        token: token,\r\n      };\r\n      this.state = loginState;\r\n    },\r\n\r\n    setRememberState(user, token) {\r\n      let loginState = {\r\n        isLoading: false,\r\n        isAuthenticated: true,\r\n        user: user,\r\n        token: token\r\n      }\r\n    }\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}